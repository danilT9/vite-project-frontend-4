{"version":3,"file":"commonHelpers.js","sources":["../src/js/api/getEventsApi.js","../src/img/svg/icons.svg#icon-vector","../src/js/cards.js","../src/js/api/getEventByIdApi.js","../src/img/svg/icons.svg#icon-close","../src/img/svg/icons.svg#icon-ticket","../src/js/card-modal.js","../src/main.js"],"sourcesContent":["\nconst API_KEY = \"NKfpM5UvowsmCLMzAUmqihz3Fsx0dtjP\";\n\nexport const getEventsApi = async (page = 0) => {\n  const response = await fetch(\n    `https://app.ticketmaster.com/discovery/v2/events.json?apikey=${API_KEY}&page=${page}&size=20`\n  );\n\n  const data = await response.json();\n  console.log(data._embedded);\n  return {\n    events: data._embedded?.events || [],\n    totalPages: data.page.totalPages\n  };\n};\n","export default \"__VITE_ASSET__29227195__$_#icon-vector__\"","import { getEventsApi } from \"./api/getEventsApi.js\";\nimport vector from \"../img/svg/icons.svg#icon-vector\"\n\nconst cardList = document.getElementById('cardList');\n\nlet currentPage = 0;\nlet totalPages = 0;\n\nexport async function fetchEvents() {\n  const data = await getEventsApi(currentPage);\n\n  totalPages = data.totalPages;\n\n  renderCards(data.events);\n  return data.events\n}\n\nfunction renderCards(events) {\n  cardList.innerHTML = '';\n\n  events.forEach((event, index) => {\n    const image = event.images[0]?.url || '';\n    const date = event.dates.start.localDate;\n    const place = event._embedded?.venues[0]?.name || 'Unknown';\n\n    const card = document.createElement('li');\n    card.className = 'card';\n    card.style.animationDelay = `${index * 0.1}s`;\n\n    card.innerHTML = `\n      <img class=\"card-img\" src=\"${image}\" alt=\"${event.name}\" />\n      <h3 class=\"card-title\">${event.name}</h3>\n      <p class=\"card-date\">${date}</p>\n      <p class=\"card-place\">\n      <svg class=\"location-icon\">\n            <use href=\"${vector}\"></use>\n        </svg>\n        ${place}\n      </p>\n    `;\n    \n    cardList.appendChild(card);\n  });\n}\n\nfetchEvents()\n","const API_KEY = \"NKfpM5UvowsmCLMzAUmqihz3Fsx0dtjP\";\n\nexport const getEventByIdApi = async (eventId) => {\n  try {\n    const response = await fetch(\n      `https://app.ticketmaster.com/discovery/v2/events/${eventId}.json?apikey=${API_KEY}`\n    );\n    \n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    \n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Error fetching event details:', error);\n    return null;\n  }\n};","export default \"__VITE_ASSET__0c78aa03__$_#icon-close__\"","export default \"__VITE_ASSET__822bcc0e__$_#icon-ticket__\"","import { getEventByIdApi } from \"./api/getEventByIdApi.js\";\nimport crossSvg from \"../img/svg/icons.svg#icon-close\"\nimport price from \"../img/svg/icons.svg#icon-ticket\"\n\nconst modalThumb = document.getElementById(\"eventsModalThumb\");\nconst modalElement = document.getElementById(\"events-modal\");\n\nfunction formatDate(dateString) {\n    const date = new Date(dateString);\n    \n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    \n    const hours = String(date.getHours()).padStart(2, '0');\n    const minutes = String(date.getMinutes()).padStart(2, '0');\n    \n    return `${year}-${month}-${day}<br>${hours}:${minutes} (Kyiv/Ukraine)`;\n}\n\nexport async function handleCardClick(eventId) {\n  try {\n    const eventData = await getEventByIdApi(eventId);\n    \n    if (!eventData) {\n      console.error('Не вдалося отримати деталі події');\n      return;\n    }\n    renderModal(eventData);\n    \n    modalElement.classList.remove(\"is-hidden\");\n    setupModalClose();\n    \n    return eventData;\n  } catch (error) {\n    console.error('Помилка при відкритті модалки:', error);\n  }\n}\n\nfunction renderModal(eventData) {\n    function getRandomInt(min, max) {\n        min = Math.ceil(min);\n        max = Math.floor(max);\n        return Math.floor(Math.random() * (max - min + 1)) + min;\n      }\n  \n  const venue = eventData._embedded?.venues?.[0] || {};\n  const mainImage = eventData.images?.find(img => img.ratio === '16_9') || eventData.images?.[0] || { url: '' };\n\n  function limitText(text, limit = 200) {\n    if (!text || text.length <= limit) return text || '';\n    let lastSpace = text.substring(0, limit).lastIndexOf(' ');\n    \n    if (lastSpace === -1) lastSpace = limit;\n\n    return text.substring(0, lastSpace) + '...';\n  }\n  \n  let accessibleInfo = limitText(venue.accessibleSeatingDetail);\n  \n  modalThumb.innerHTML = `\n    <button class=\"modal__button__close close-button\">\n      <svg class=\"modal__button__close__icon\">\n        <use href=\"${crossSvg}\"></use>\n      </svg>\n    </button>\n    \n    <img src=\"${mainImage.url}\" alt=\"${eventData.name}\" class=\"modal__info-img-round\">\n    \n    <div class=\"modal__info__thumb\">\n      <img src=\"${mainImage.url}\" alt=\"${eventData.name}\" class=\"modal__info-img\">\n      \n      <ul class=\"modal__info__list\">\n        <li class=\"modal__info__item\">\n          <h4 class=\"modal__info__item__title\">INFO</h4>\n          <p class=\"modal__info__item__text\">${accessibleInfo || 'Unfortunately, we found nothing about this event.'}</p>\n        </li>\n        \n        <li class=\"modal__info__item\">\n          <h4 class=\"modal__info__item__title\">WHEN</h4>\n          <p class=\"modal__info__item__text\">${formatDate(eventData.dates.start.dateTime)}</p>\n        </li>\n        \n        <li class=\"modal__info__item\">\n          <h4 class=\"modal__info__item__title\">WHERE</h4>\n          <p class=\"modal__info__item__text\">${venue.name}, ${venue.city.name || ''}</p>\n        </li>\n        \n        <li class=\"modal__info__item\">\n                    <h4 class=\"modal__info__item__title\">PRICES</h4>\n                    <div class=\"modal__info__item__thumb\">\n                        <svg class=\"modal__info__item-rect\">\n                            <use href=\"${price}\"></use>\n                        </svg>\n                        <p class=\"modal__info__item__text\">Standart ${getRandomInt(100, 300)}-${getRandomInt(350, 600)} UAH</p>\n                    </div>\n                    <button class=\"modal__info__item-btn\" type=\"button\" onclick=\"window.open('${eventData.url}', '_blank')\">BUY TICKETS</button>\n                    <div class=\"modal__info__item__thumb\">\n                        <svg class=\"modal__info__item-rect\">\n                            <use href=\"${price}\"></use>\n                        </svg>\n                        <p class=\"modal__info__item__text\">VIP ${getRandomInt(800, 1000)}-${getRandomInt(1100, 1600)} UAH</p>\n                    </div>\n                    <button class=\"modal__info__item-btn\" type=\"button\" onclick=\"window.open('${eventData.url}', '_blank')\">BUY TICKETS</button>\n            </li>\n      </ul>\n    </div>\n    \n    <button type=\"button\" class=\"modal__info-btn\" onclick=\"window.open('${eventData.url}', '_blank')\">\n      MORE FROM THIS AUTHOR\n    </button>\n  `;\n}\n\nfunction setupModalClose() {\n  const closeBtn = modalThumb.querySelector(\".close-button\");\n  if (closeBtn) {\n    closeBtn.onclick = () => {\n      modalElement.classList.add(\"is-hidden\");\n    };\n  }\n  \n  modalElement.onclick = function(event) {\n    if (event.target === modalElement) {\n      modalElement.classList.add(\"is-hidden\");\n    }\n  };\n}","import { getEventsApi } from \"./js/api/getEventsApi.js\";\nimport \"./js/header.js\";\nimport \"./js/cards.js\";\n\n\ngetEventsApi()\n\nimport \"./js/card-modal.js\";\nimport { handleCardClick } from \"./js/card-modal.js\";\n\nsetTimeout(() => {\n    const cardList = document.getElementById('cardList');\n\n    function setupEventDelegation() {\n      cardList.addEventListener('click', async (event) => {\n        const card = event.target.closest('.card');\n        if (!card) return;\n        const cards = cardList.querySelectorAll('.card');\n        const index = Array.from(cards).indexOf(card);\n        \n        try {\n          const response = await fetch('https://app.ticketmaster.com/discovery/v2/events.json?apikey=NKfpM5UvowsmCLMzAUmqihz3Fsx0dtjP&page=0&size=20');\n          const data = await response.json();\n          const events = data._embedded.events;\n          \n          if (events[index]) {\n            handleCardClick(events[index].id);\n          }\n        } catch (error) {\n          console.error('Помилка:', error);\n        }\n      });\n    }\n    setupEventDelegation();\n    \n  }, 1000);"],"names":["API_KEY","getEventsApi","page","data","_a","vector","cardList","currentPage","fetchEvents","renderCards","events","event","index","image","date","place","_c","_b","card","getEventByIdApi","eventId","response","error","crossSvg","price","modalThumb","modalElement","formatDate","dateString","year","month","day","hours","minutes","handleCardClick","eventData","renderModal","setupModalClose","getRandomInt","min","max","venue","mainImage","img","_d","limitText","text","limit","lastSpace","accessibleInfo","closeBtn","setupEventDelegation","cards"],"mappings":"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"}